## Vue Instance

### 정의와 속성
- 뷰 인스턴스는 뷰로 화면을 개발하기 위해 필수적으로 생성해야하는 기본 단위.
```
<html>
  <head></head>
  <body>
    <div id="app"> {{ message }}</div>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.2/dist/vue.js"></script>
    <script>
      new Vue({
        el: '#app',
        data: {
          message: 'Hello!'
        }
      });
    </script>
  </body>
</html>
```

- `new Vue()`로 인스턴스를 생성.
- 인스턴스 안에 el 속성으로 뷰 인스턴스가 그려질 지점을 지정하고, data 속성에 message 값을 정의하여 화면의 {{message}}에 연결.
- el, data 외에 template, methods, created 등 미리 정의되어 있는 속성을 사용할 수 있다.
---
### 뷰 인스턴스 유효 범위
- el 속성과 밀접한 관계.
- 위 코드에서는 id가 app인 div태그 안에서만 유효하다.
---
### 뷰 인스턴스 라이프 사이클(life cycle)
- 인스턴스의 상태에 따라 호출할 수 있는 속성들을 라이프 사이클(life cycle) 속성이라고 한다.
- 각 라이프 사이클 속성에서 실행되는 커스텀 로직을 라이프 사이클 훅(hook)이라고 한다.

#### life cycle의 종류
- 인스턴스의 생성, 변경, 소멸과 관련되어 총 8개가 있다.
- 크게 인스턴스의 __생성__, 생성된 인스턴스를 화면에 __부착__, 부착된 인스턴스의 내용이 __갱신__, 인스턴스가 제거되는 __소멸__의 4단계.

##### beforeCreate
- 인스턴스가 생성되고 나서 가장 처음으로 실행되는 단계.
- data 속성과 methods 속성이 아직 인스턴스에 정의되어 있지 않음.
- 돔과 같은 화면 요소에도 접근할 수 없음.

##### created
- beforeCreate 다음에 실행되는 단계.
- data 속성과 methods 속성이 정의되었기 때문에 this.data와 같은 로직들을 이용해 data 속성과 methods 속성에 정의된 값에 접근해 실행 가능.
- 인스턴스가 화면요소에 부착되기 전이기 때문에 template 속성에 정의된 돔 요소로 접근할 수 없음.
- 서버에 데이터를 요청하여 받아오는 로직을 수행하기 좋음.

##### beforeMount
- created 단계 이후 template 속성에 지정한 마크업 속성을 render() 함수로 변환한 후 el 속성에 지정한 돔에 인스턴스를 부착하기 전에 호출됨.
- render() 함수가 호출되기 직전의 로직을 추가하기 좋음.

##### mounted
- el 속성에 지정한 화면 요소에 인스턴스가 부착되고 나면 호출되는 단계.
- template 속성에 정의한 돔에 접근할 수 있어 화면 요소를 제어하는 로직을 수행하기 좋은 단계.
- 돔에 인스턴스가 부착되자마자 호출되기 때문에 하위 컴포넌트나 외부 라이브러리에 의해 추가된 화면 요소들이 최종 html 코드로 변환되는 시점과 다를 수 있음.
- 변환되는 시점이 다를 경우 $nextTick() API를 활용하여 HTML 코드로 최종 파싱될 때까지 기다린 후 돔 제어 로직을 추가한다.

##### beforeUpdate
- 인스턴스에 정의한 속성들이 화면에 치환된다. 치환된 값은 뷰의 반응성을 제공하기 위해 $watch속성으로 감시한다. (데이터 관찰)
- beforeUpdate는 관찰하고 있는 데이터가 변경되면 가상 돔으로 화면을 다시 그리기 전에 호출되는 단계.
- 변경 예정인 새 데이터에 접근할 수 있어 변경 예정 데이터의 값과 관련된 로직을 미리 넣을 수 있음.
- 여기에 값을 변경하는 로직을 넣더라도 화면이 다시 그려지지는 않음.

##### updated
- 데이터가 변경되고 나서 가상 돔으로 다시 화면을 그리고나면 실행되는 단계.
- 데이터 변경으로 인한 화면 요소 변경까지 완료된 시점이므로, 데이터 변경 후 화면 요소 제어와 관련된 로직을 추가하기 좋은 단계.
- 이 단계에서 데이터 값을 변경하면 무한 루프에 빠질 수 있음. 값을 변경하려면 computed, watch와 값은 속성을 사용해야 한다.
- 데이터 값을 갱신하는 로직은 가급적이면 beforeUpdate에 추가하고, updated에서는 변경 데이터의 화면 요소와 관련된 로직을 추가하는 것이 좋음.

##### beforeDestroy
- 뷰 인스턴스가 파괴되기 직전에 호출되는 단계.
- 아직 인스턴스에 접근할 수 있으므로 뷰 인스턴스의 데이터를 삭제하기 좋음.

##### destroyed
- 뷰 인스턴스가 파괴되고 나서 호출되는 단계.
- 뷰 인스턴스에 정의한 모든 속성이 제거되고 하위에 선언한 인스턴스들 또한 모두 파괴됨.
